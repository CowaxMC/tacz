# Пошаговое руководство по настройке

## 1. Создание Discord бота

### Шаг 1: Создание приложения в Discord

1. Перейдите на [Discord Developer Portal](https://discord.com/developers/applications)
2. Нажмите "New Application"
3. Введите название приложения (например, "Release Bot")
4. Нажмите "Create"

### Шаг 2: Создание бота

1. В левом меню выберите "Bot"
2. Нажмите "Add Bot"
3. В разделе "Token" нажмите "Copy" для копирования токена
4. **Сохраните токен в безопасном месте!**

### Шаг 3: Настройка разрешений

1. В разделе "Bot" прокрутите вниз до "Privileged Gateway Intents"
2. Включите "Message Content Intent" (если нужно)
3. В разделе "OAuth2" → "URL Generator":
   - Выберите "bot" в Scopes
   - Выберите необходимые разрешения:
     - Send Messages
     - Embed Links
     - Read Message History
     - Use Slash Commands (опционально)
4. Скопируйте сгенерированную ссылку и откройте её в браузере
5. Выберите сервер и авторизуйте бота

## 2. Создание Webhook

### Шаг 1: Создание webhook в Discord

1. Откройте настройки канала, где хотите получать уведомления
2. Перейдите в "Integrations" → "Webhooks"
3. Нажмите "Create Webhook"
4. Введите название (например, "GitHub Releases")
5. Выберите аватар (опционально)
6. Нажмите "Copy Webhook URL"
7. **Сохраните URL в безопасном месте!**

### Шаг 2: Получение ID канала

1. Включите режим разработчика в Discord:
   - Пользовательские настройки → Дополнительно → Режим разработчика
2. Правый клик на канал → "Copy ID"
3. **Сохраните ID канала!**

## 3. Настройка GitHub репозитория

### Шаг 1: Добавление секретов

1. Перейдите в настройки репозитория
2. Выберите "Secrets and variables" → "Actions"
3. Нажмите "New repository secret"
4. Добавьте следующие секреты:

| Имя секрета | Значение | Описание |
|-------------|----------|----------|
| `DISCORD_WEBHOOK_URL` | URL webhook'а из Discord | URL для отправки сообщений |
| `GITHUB_TOKEN` | (автоматически) | Токен для доступа к GitHub API |

### Шаг 2: Проверка workflow

1. Убедитесь, что файл `.github/workflows/discord-release-notification.yml` существует
2. Workflow будет автоматически запускаться при:
   - Создании релизов
   - Создании тегов

## 4. Локальная настройка

### Шаг 1: Клонирование репозитория

```bash
git clone <your-repo-url>
cd discord-release-bot
```

### Шаг 2: Установка зависимостей

```bash
pip install -r requirements.txt
```

### Шаг 3: Настройка переменных окружения

```bash
# Скопируйте файл примера
cp env.example .env

# Отредактируйте .env файл
nano .env  # или любой другой редактор
```

Заполните файл `.env`:

```env
DISCORD_BOT_TOKEN=your_bot_token_here
DISCORD_CHANNEL_ID=your_channel_id_here
DISCORD_WEBHOOK_URL=your_webhook_url_here
```

### Шаг 4: Запуск бота

```bash
python discord_bot.py
```

## 5. Тестирование

### Тест 1: Проверка бота

1. В Discord канале напишите `!ping`
2. Бот должен ответить "Pong! Бот работает!"

### Тест 2: Настройка канала

1. В Discord канале напишите `!setup`
2. Бот должен ответить, что канал настроен

### Тест 3: Создание тестового релиза

1. Создайте тег в репозитории:
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```
2. Проверьте, что в Discord пришло уведомление

### Тест 4: Создание релиза через GitHub

1. Перейдите в раздел "Releases" репозитория
2. Нажмите "Create a new release"
3. Выберите тег и заполните информацию
4. Нажмите "Publish release"
5. Проверьте уведомление в Discord

## 6. Устранение проблем

### Бот не отвечает

- Проверьте правильность токена
- Убедитесь, что бот добавлен на сервер
- Проверьте права бота в канале

### Webhook не работает

- Проверьте правильность URL
- Убедитесь, что webhook активен
- Проверьте логи бота

### GitHub Actions не срабатывает

- Проверьте настройки секретов
- Убедитесь, что workflow файл в правильной папке
- Проверьте права доступа к репозиторию

## 7. Дополнительные настройки

### Настройка уведомлений для разных типов релизов

Вы можете настроить, какие типы релизов отправлять, отредактировав workflow файл.

### Добавление дополнительных полей в embed

Отредактируйте файлы в папке `scripts/` для добавления дополнительной информации.

### Настройка цветов и эмодзи

Измените значения в функциях создания embed для настройки внешнего вида уведомлений.
